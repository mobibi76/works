<div id="iframe-container" style="display: none;">
    <iframe id="myIframe" src="https://172.25.84.206:8000/game-ko/" width="100%"></iframe>
    <div id="loading-message">페이지를 불러오는 중...</div>
</div>
<div id="error-message" style="display: none;">페이지를 불러올 수 없습니다. 서버 상태를 확인해주세요.</div>

<script>
// iframe이 로드될 때까지 대기하는 함수
function waitForIframeLoad() {
    const iframe = document.getElementById('myIframe');
    const loadingMessage = document.getElementById('loading-message');

    // iframe이 완전히 로드되었는지 확인
    if (iframe.contentWindow && iframe.contentWindow.location.href !== 'about:blank') {
        loadingMessage.style.display = 'none'; // 로드 완료 시 로딩 메시지 숨김
        return;
    }

    // 아직 로드되지 않았으면 계속 대기
    setTimeout(waitForIframeLoad, 100); // 0.1초마다 재확인
}

// 서버 상태 확인 함수
function checkServerStatus() {
    fetch('https://172.25.84.206:8000/game-ko/', { method: 'HEAD' })
        .then((response) => {
            if (response.ok) {
                // 서버가 응답하면 iframe을 표시하고 로딩 시작
                document.getElementById('iframe-container').style.display = 'block';
                document.getElementById('error-message').style.display = 'none';
                waitForIframeLoad(); // iframe 로드 대기 함수 호출
            } else {
                // 응답은 있으나 상태가 OK가 아닐 때
                document.getElementById('error-message').style.display = 'block';
            }
        })
        .catch((error) => {
            // 서버가 응답하지 않으면 에러 메시지 표시
            document.getElementById('error-message').style.display = 'block';
        });
}

// 페이지 로드 시 서버 상태 확인
checkServerStatus();
</script>